# BigQuery Sink Module

The BigQuery sink module allows you to write input data to a specified BigQuery table.

## BigQuery Sink Module Parameters

The following parameters can be used to configure the BigQuery sink module:

| Parameter              | Required (Default)        | Type   | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| ---------------------- | ------------------------- | ------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| table                  | Required                  | String | Specifies the table to which the data will be written in BigQuery. Use the format `{project}:{dataset}.{table}` to specify the table.                                                                                                                                                                                                                                                                                                                                                                                                               |
| schema [1]             | Optional (`auto`)         | String | Specifies the schema for the table. By default, the schema is automatically inferred from the data (`auto`). If you specify `get_from_table`, the schema will be obtained from an existing table. Alternatively, you can directly specify the schema using the following format: `"field1:type1,field2:type2,..."`. You can also specify the path to a schema.json file, which should be in the `bq show --schema --format=prettyjson` format. An error will occur if the `schema` is not specified and the `table` does not exist in BigQuery yet. |
| create_disposition     | Optional (`CREATE_NEVER`) | Enum   | Specifies the behavior when creating the table. Possible values are `CREATE_IF_NEEDED` and `CREATE_NEVER`.                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| partitioning [2]       | Optional (`disabled`)     | Enum   | Specifies the partitioning type for the table. Possible values are `HOUR`, `DAY`, `MONTH`, or `YEAR`.                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| partitioning_field [2] | Optional (`disabled`)     | String | Specifies the field name to be used as the partitioning field. This field can only have the data types `TIMESTAMP`, `DATE`, or `DATETIME`.                                                                                                                                                                                                                                                                                                                                                                                                          |
| clustering [2]         | Optional (`disabled`)     | String | Specifies the field(s) to be used for clustering. Use the format `'field1,field2,field3'` to specify multiple fields.                                                                                                                                                                                                                                                                                                                                                                                                                               |

[1] With `auto`, the schema is inferred from the data obtained from the `sources` module or dynamically created from the PCollection's native data types. With `get_from_table`, the schema is retrieved from an existing BigQuery table. When using `get_from_table`, the destination table in BigQuery must already exist.
Note: For timestamp types, the timezone information is treated as absent.

[2] The `partitioning` and `clustering` options can only be used if the destination table is a partitioned table or does not exist. It is not possible to convert an existing non-partitioned table to a partitioned table. [Reference: Google Issue Tracker](https://issuetracker.google.com/issues/113304131)
